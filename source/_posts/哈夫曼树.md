---
title: 哈夫曼树
date: 2022-11-26 15:29:38
tags:
- 哈夫曼树
- 最优二叉树
- 带权路径长度最小
categories:
- 数据结构
---



哈夫曼树的基本概念：路径、路径长度、结点的权、带权路径长度

当用 n 个结点（都做叶子结点且都有各自的权值）试图构建一棵树时，如果构建的这棵树的带权路径长度最小，称这棵树为“最优二叉树”，有时也叫“赫夫曼树”或者“哈夫曼树”。

<!-- more -->

### 1 相关名词定义

路径：在一棵树中，一个结点到另一个结点之间的通路，称为路径。图 1 中，从根结点到结点 a 之间的通路就是一条路径。

路径长度：在一条路径中，每经过一个结点，路径长度都要加 1 。例如在一棵树中，规定根结点所在层数为1层，那么从根结点到第 i 层结点的路径长度为 i - 1 。图 1 中从根结点到结点 c 的路径长度为 3。

结点的权：给每一个结点赋予一个新的数值，被称为这个结点的权。例如，图 1 中结点 a 的权为 7，结点 b 的权为 5。

结点的带权路径长度：指的是从根结点到该结点之间的路径长度与该结点的权的乘积。例如，图 1 中结点 b 的带权路径长度为 2 * 5 = 10 。

树的带权路径长度为树中所有叶子结点的带权路径长度之和。通常记作 “WPL” 。例如图 1 中所示的这颗树的带权路径长度为：

`WPL = 7 * 1 + 5 * 2 + 2 * 3 + 4 * 3`

### 2 例子

```c++
#include <bits/stdc++.h>

using namespace std;

typedef long long LL;
priority_queue<LL, vector<LL>, greater<LL>> q; // 小顶堆

// 求树的带权路径：wpl，所有叶子的带权路径之和（哈夫曼树的非叶子节点的权值之和）
int main() {
    int n;
    LL x, y, tmp;
    LL res = 0;
    
    cin >> n;
    
    for (int i = 0; i < n; i ++ ) {
        cin >> tmp;
        q.push(tmp);
    }

    while (q.size() > 1) {
        x = q.top();
        q.pop();
        y = q.top();
        q.pop();

        q.push(x + y);
        res += x + y;
    }

    cout << res << endl;

    return 0;
}

/*
1 2 2 3 6
30
*/   
```

